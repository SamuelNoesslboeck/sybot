[package]
name = "sybot_lib"
authors = [ "Samuel Nösslböck <samuel.noesslboeck@gmail.com>" ]
version = "0.8.2"
description = "A simple library to control groups of components and robots"
edition = "2021"
repository = "https://github.com/SamuelNoesslboeck/sybot_lib"
license-file = "LICENSE"
keywords = [ "framework", "robotics", "automation" ]
# default-run = "interpreter"

[lib]
name = "sybot_lib"
path = "src/lib.rs"

# [[bin]]
# name = "interpreter"
# path = "bin/interpreter.rs"

# [[example]]
# name = "mqtt"
# path = "examples/mqtt.rs"
# required-features = [ "mqtt" ]

# [[example]]
# name = "webserver"
# path = "examples/webserver.rs"
# required-features = [ "http" ]

[dependencies]
actix = { version = "0.13.0", optional = true } 
actix-web = { version = "4", optional = true }
actix-web-actors = { version = "4.1.0", optional = true } 
colored = "2.0.0"
colored_json = "3.0.1"
gcode = "0.6.1"
glam = "0.24.0"
mlua = { version = "0.8.8", optional = true, features = [ "lua54", "module", "macros", "serialize" ] }
paho-mqtt = { version = "0.12.0", optional = true }
serde = { version = "1.0.104", features = ["derive"] }
serde_json = "1.0.48"
stepper_lib = { path = "../stepper_lib" } # { version = "0.11.3" } # { git = "https://github.com/SamuelNoesslboeck/stepper_lib" }

sybot_pkg = { path = "sybot_pkg" }
sybot_rcs = { path = "sybot_rcs" }
sybot_robs = { path = "sybot_robs" }
# sybot_scr = { path = "sybot_scr" }

[features]
default = [ "dbg-funcs" ]
dbg-funcs = [ ]

# scripting
lua = [ "dep:mlua" ]

# platform features
rasp = [ "stepper_lib/rasp" ]

# remote features
http = [ "dep:actix", "dep:actix-web", "dep:actix-web-actors" ]
mqtt = [ "dep:paho-mqtt" ]

[profile.dev]
opt-level = 0

[profile.release]
opt-level = 3

[workspace]
members = [ "sybot_rcs" ]
exclude = [ "assets", "sketches" ]